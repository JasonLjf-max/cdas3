/**
 * @desc: 埋点JS SDK
 * @version: 3.3.7 (2022-06-20)
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).cbas3=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var r,a="3.3.7";function i(t){(t=t||{}).type=t.type||"POST",t.url=t.url||"",t.cache||(t.url=t.url+"?_="+(new Date).getTime()),t.async=t.async||!0,t.data=t.data||null,t.dataType=t.dataType||"text",t.contentType=t.contentType||"application/x-www-form-urlencoded;charset=utf-8",t.success=t.success||function(){},t.error=t.error||function(){};var e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");e.responseType&&(e.responseType=t.dataType),"POST"===t.type.toUpperCase()?(e.open(t.type,t.url,t.async),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),e.send(o(t.data))):"GET"===t.type.toUpperCase()&&(e.open(t.type,t.url+"?"+o(t.data),t.async),e.send(null)),e.onreadystatechange=function(){4==e.readyState&&(e.status>=200&&e.status<300||304==e.status?t.success(e.responseText):t.error(e.responseText))}}function o(t){var e=[];for(var n in t)e.push(n+"="+t[n]);return e.join("&")}var s=new Uint8Array(16);function l(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(s)}var d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function h(t){return"string"==typeof t&&d.test(t)}for(var u=[],c=0;c<256;++c)u.push((c+256).toString(16).substr(1));function _(t,e,n){var r=(t=t||{}).random||(t.rng||l)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var a=0;a<16;++a)e[n+a]=r[a];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase();if(!h(n))throw TypeError("Stringified UUID is invalid");return n}(r)}var f="function"==typeof btoa,p="function"==typeof Buffer;"function"==typeof TextDecoder&&new TextDecoder;var g,v,w="function"==typeof TextEncoder?new TextEncoder:void 0,m=function(t){if(Array.isArray(t))return n(t)}(g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=")||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(g)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();v={},m.forEach((function(t,e){return v[t]=e}));var b=String.fromCharCode.bind(String);"function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array);var y=function(t){return t.replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"})).replace(/=+$/m,"")},x=f?function(t){return btoa(t)}:p?function(t){return Buffer.from(t,"binary").toString("base64")}:function(t){for(var e,n,r,a,i="",o=t.length%3,s=0;s<t.length;){if((n=t.charCodeAt(s++))>255||(r=t.charCodeAt(s++))>255||(a=t.charCodeAt(s++))>255)throw new TypeError("invalid character found");i+=m[(e=n<<16|r<<8|a)>>18&63]+m[e>>12&63]+m[e>>6&63]+m[63&e]}return o?i.slice(0,o-3)+"===".substring(o):i},k=p?function(t){return Buffer.from(t).toString("base64")}:function(t){for(var e=[],n=0,r=t.length;n<r;n+=4096)e.push(b.apply(null,t.subarray(n,n+4096)));return x(e.join(""))},z=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?b(192|e>>>6)+b(128|63&e):b(224|e>>>12&15)+b(128|e>>>6&63)+b(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return b(240|e>>>18&7)+b(128|e>>>12&63)+b(128|e>>>6&63)+b(128|63&e)},O=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,A=p?function(t){return Buffer.from(t,"utf8").toString("base64")}:w?function(t){return k(w.encode(t))}:function(t){return x(t.replace(O,z))};function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var C=function(e){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var r=n.shift();if(r){if("object"!==t(r))throw new TypeError(r+"must be non-object");for(var a in r)S(r,a)&&(e[a]=r[a])}}return e},U=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};function E(t,e,n,r,a){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),a);else for(var i=0;i<r;i++)t[a+i]=e[n+i]}function T(t){for(var e=t.length;--e>=0;)t[e]=0}var j=256,D=286,I=30,P=15,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=new Array(576);T(L);var F=new Array(60);T(F);var R=new Array(512);T(R);var q=new Array(256);T(q);var J=new Array(29);T(J);var V,H,X,$=new Array(I);function G(t,e,n,r,a){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=t&&t.length}function Y(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function K(t){return t<256?R[t]:R[256+(t>>>7)]}function Q(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function Z(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,Q(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function tt(t,e,n){Z(t,n[2*e],n[2*e+1])}function et(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function nt(t,e,n){var r,a,i=new Array(16),o=0;for(r=1;r<=P;r++)i[r]=o=o+n[r-1]<<1;for(a=0;a<=e;a++){var s=t[2*a+1];0!==s&&(t[2*a]=et(i[s]++,s))}}function rt(t){var e;for(e=0;e<D;e++)t.dyn_ltree[2*e]=0;for(e=0;e<I;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function at(t){t.bi_valid>8?Q(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function it(t,e,n,r){var a=2*e,i=2*n;return t[a]<t[i]||t[a]===t[i]&&r[e]<=r[n]}function ot(t,e,n){for(var r=t.heap[n],a=n<<1;a<=t.heap_len&&(a<t.heap_len&&it(e,t.heap[a+1],t.heap[a],t.depth)&&a++,!it(e,r,t.heap[a],t.depth));)t.heap[n]=t.heap[a],n=a,a<<=1;t.heap[n]=r}function st(t,e,n){var r,a,i,o,s=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],a=t.pending_buf[t.l_buf+s],s++,0===r?tt(t,a,e):(tt(t,(i=q[a])+j+1,e),0!==(o=B[i])&&Z(t,a-=J[i],o),tt(t,i=K(--r),n),0!==(o=M[i])&&Z(t,r-=$[i],o))}while(s<t.last_lit);tt(t,256,e)}function lt(t,e){var n,r,a,i=e.dyn_tree,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,d=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<l;n++)0!==i[2*n]?(t.heap[++t.heap_len]=d=n,t.depth[n]=0):i[2*n+1]=0;for(;t.heap_len<2;)i[2*(a=t.heap[++t.heap_len]=d<2?++d:0)]=1,t.depth[a]=0,t.opt_len--,s&&(t.static_len-=o[2*a+1]);for(e.max_code=d,n=t.heap_len>>1;n>=1;n--)ot(t,i,n);a=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],ot(t,i,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,i[2*a]=i[2*n]+i[2*r],t.depth[a]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,i[2*n+1]=i[2*r+1]=a,t.heap[1]=a++,ot(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,a,i,o,s,l=e.dyn_tree,d=e.max_code,h=e.stat_desc.static_tree,u=e.stat_desc.has_stree,c=e.stat_desc.extra_bits,_=e.stat_desc.extra_base,f=e.stat_desc.max_length,p=0;for(i=0;i<=P;i++)t.bl_count[i]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(i=l[2*l[2*(r=t.heap[n])+1]+1]+1)>f&&(i=f,p++),l[2*r+1]=i,r>d||(t.bl_count[i]++,o=0,r>=_&&(o=c[r-_]),s=l[2*r],t.opt_len+=s*(i+o),u&&(t.static_len+=s*(h[2*r+1]+o)));if(0!==p){do{for(i=f-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[f]--,p-=2}while(p>0);for(i=f;0!==i;i--)for(r=t.bl_count[i];0!==r;)(a=t.heap[--n])>d||(l[2*a+1]!==i&&(t.opt_len+=(i-l[2*a+1])*l[2*a],l[2*a+1]=i),r--)}}(t,e),nt(i,d,t.bl_count)}function dt(t,e,n){var r,a,i=-1,o=e[1],s=0,l=7,d=4;for(0===o&&(l=138,d=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)a=o,o=e[2*(r+1)+1],++s<l&&a===o||(s<d?t.bl_tree[2*a]+=s:0!==a?(a!==i&&t.bl_tree[2*a]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,i=a,0===o?(l=138,d=3):a===o?(l=6,d=3):(l=7,d=4))}function ht(t,e,n){var r,a,i=-1,o=e[1],s=0,l=7,d=4;for(0===o&&(l=138,d=3),r=0;r<=n;r++)if(a=o,o=e[2*(r+1)+1],!(++s<l&&a===o)){if(s<d)do{tt(t,a,t.bl_tree)}while(0!=--s);else 0!==a?(a!==i&&(tt(t,a,t.bl_tree),s--),tt(t,16,t.bl_tree),Z(t,s-3,2)):s<=10?(tt(t,17,t.bl_tree),Z(t,s-3,3)):(tt(t,18,t.bl_tree),Z(t,s-11,7));s=0,i=a,0===o?(l=138,d=3):a===o?(l=6,d=3):(l=7,d=4)}}T($);var ut=!1;function ct(t){ut||(!function(){var t,e,n,r,a,i=new Array(16);for(n=0,r=0;r<28;r++)for(J[r]=n,t=0;t<1<<B[r];t++)q[n++]=r;for(q[n-1]=r,a=0,r=0;r<16;r++)for($[r]=a,t=0;t<1<<M[r];t++)R[a++]=r;for(a>>=7;r<I;r++)for($[r]=a<<7,t=0;t<1<<M[r]-7;t++)R[256+a++]=r;for(e=0;e<=P;e++)i[e]=0;for(t=0;t<=143;)L[2*t+1]=8,t++,i[8]++;for(;t<=255;)L[2*t+1]=9,t++,i[9]++;for(;t<=279;)L[2*t+1]=7,t++,i[7]++;for(;t<=287;)L[2*t+1]=8,t++,i[8]++;for(nt(L,287,i),t=0;t<I;t++)F[2*t+1]=5,F[2*t]=et(t,5);V=new G(L,B,257,D,P),H=new G(F,M,0,I,P),X=new G(new Array(0),N,0,19,7)}(),ut=!0),t.l_desc=new Y(t.dyn_ltree,V),t.d_desc=new Y(t.dyn_dtree,H),t.bl_desc=new Y(t.bl_tree,X),t.bi_buf=0,t.bi_valid=0,rt(t)}function _t(t,e,n,r){Z(t,0+(r?1:0),3),function(t,e,n,r){at(t),r&&(Q(t,n),Q(t,~n)),E(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}function ft(t){Z(t,2,3),tt(t,256,L),function(t){16===t.bi_valid?(Q(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}function pt(t,e,n,r){var a,i,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<j;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),lt(t,t.l_desc),lt(t,t.d_desc),o=function(t){var e;for(dt(t,t.dyn_ltree,t.l_desc.max_code),dt(t,t.dyn_dtree,t.d_desc.max_code),lt(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*W[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),a=t.opt_len+3+7>>>3,(i=t.static_len+3+7>>>3)<=a&&(a=i)):a=i=n+5,n+4<=a&&-1!==e?_t(t,e,n,r):4===t.strategy||i===a?(Z(t,2+(r?1:0),3),st(t,L,F)):(Z(t,4+(r?1:0),3),function(t,e,n,r){var a;for(Z(t,e-257,5),Z(t,n-1,5),Z(t,r-4,4),a=0;a<r;a++)Z(t,t.bl_tree[2*W[a]+1],3);ht(t,t.dyn_ltree,e-1),ht(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),st(t,t.dyn_ltree,t.dyn_dtree)),rt(t),r&&at(t)}function gt(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(q[n]+j+1)]++,t.dyn_dtree[2*K(e)]++),t.last_lit===t.lit_bufsize-1}function vt(t,e,n,r){for(var a=65535&t|0,i=t>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{i=i+(a=a+e[r++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0}var wt=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();function mt(t,e,n,r){var a=wt,i=r+n;t^=-1;for(var o=r;o<i;o++)t=t>>>8^a[255&(t^e[o])];return-1^t}var bt,yt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},xt=-2,kt=258,zt=262,Ot=103,At=113,St=666;function Ct(t,e){return t.msg=yt[e],e}function Ut(t){return(t<<1)-(t>4?9:0)}function Et(t){for(var e=t.length;--e>=0;)t[e]=0}function Tt(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(E(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function jt(t,e){pt(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Tt(t.strm)}function Dt(t,e){t.pending_buf[t.pending++]=e}function It(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function Pt(t,e){var n,r,a=t.max_chain_length,i=t.strstart,o=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-zt?t.strstart-(t.w_size-zt):0,d=t.window,h=t.w_mask,u=t.prev,c=t.strstart+kt,_=d[i+o-1],f=d[i+o];t.prev_length>=t.good_match&&(a>>=2),s>t.lookahead&&(s=t.lookahead);do{if(d[(n=e)+o]===f&&d[n+o-1]===_&&d[n]===d[i]&&d[++n]===d[i+1]){i+=2,n++;do{}while(d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&i<c);if(r=kt-(c-i),i=c-kt,r>o){if(t.match_start=e,o=r,r>=s)break;_=d[i+o-1],f=d[i+o]}}}while((e=u[e&h])>l&&0!=--a);return o<=t.lookahead?o:t.lookahead}function Bt(t){var e,n,r,a,i,o,s,l,d,h,u=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=u+(u-zt)){E(t.window,t.window,u,u,0),t.match_start-=u,t.strstart-=u,t.block_start-=u,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=u?r-u:0}while(--n);e=n=u;do{r=t.prev[--e],t.prev[e]=r>=u?r-u:0}while(--n);a+=u}if(0===t.strm.avail_in)break;if(o=t.strm,s=t.window,l=t.strstart+t.lookahead,d=a,h=void 0,(h=o.avail_in)>d&&(h=d),n=0===h?0:(o.avail_in-=h,E(s,o.input,o.next_in,h,l),1===o.state.wrap?o.adler=vt(o.adler,s,h,l):2===o.state.wrap&&(o.adler=mt(o.adler,s,h,l)),o.next_in+=h,o.total_in+=h,h),t.lookahead+=n,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+3-1])&t.hash_mask,t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<zt&&0!==t.strm.avail_in)}function Mt(t,e){for(var n,r;;){if(t.lookahead<zt){if(Bt(t),t.lookahead<zt&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-zt&&(t.match_length=Pt(t,n)),t.match_length>=3)if(r=gt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=gt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(jt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(jt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(jt(t,!1),0===t.strm.avail_out)?1:2}function Nt(t,e){for(var n,r,a;;){if(t.lookahead<zt){if(Bt(t),t.lookahead<zt&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-zt&&(t.match_length=Pt(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){a=t.strstart+t.lookahead-3,r=gt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=a&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(jt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=gt(t,0,t.window[t.strstart-1]))&&jt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=gt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(jt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(jt(t,!1),0===t.strm.avail_out)?1:2}function Wt(t,e,n,r,a){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=a}function Lt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Et(this.dyn_ltree),Et(this.dyn_dtree),Et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ft(t){var e,n=function(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:At,t.adler=2===e.wrap?0:1,e.last_flush=0,ct(e),0):Ct(t,xt)}(t);return 0===n&&((e=t.state).window_size=2*e.w_size,Et(e.head),e.max_lazy_match=bt[e.level].max_lazy,e.good_match=bt[e.level].good_length,e.nice_match=bt[e.level].nice_length,e.max_chain_length=bt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n}function Rt(t,e){var n,r,a,i;if(!t||!t.state||e>5||e<0)return t?Ct(t,xt):xt;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||r.status===St&&4!==e)return Ct(t,0===t.avail_out?-5:xt);if(r.strm=t,n=r.last_flush,r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,Dt(r,31),Dt(r,139),Dt(r,8),r.gzhead?(Dt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Dt(r,255&r.gzhead.time),Dt(r,r.gzhead.time>>8&255),Dt(r,r.gzhead.time>>16&255),Dt(r,r.gzhead.time>>24&255),Dt(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Dt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Dt(r,255&r.gzhead.extra.length),Dt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=mt(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(Dt(r,0),Dt(r,0),Dt(r,0),Dt(r,0),Dt(r,0),Dt(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Dt(r,3),r.status=At);else{var o=8+(r.w_bits-8<<4)<<8;o|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(o|=32),o+=31-o%31,r.status=At,It(r,o),0!==r.strstart&&(It(r,t.adler>>>16),It(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=mt(t.adler,r.pending_buf,r.pending-a,a)),Tt(t),a=r.pending,r.pending!==r.pending_buf_size));)Dt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=mt(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=mt(t.adler,r.pending_buf,r.pending-a,a)),Tt(t),a=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Dt(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>a&&(t.adler=mt(t.adler,r.pending_buf,r.pending-a,a)),0===i&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=mt(t.adler,r.pending_buf,r.pending-a,a)),Tt(t),a=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Dt(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>a&&(t.adler=mt(t.adler,r.pending_buf,r.pending-a,a)),0===i&&(r.status=Ot)}else r.status=Ot;if(r.status===Ot&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Tt(t),r.pending+2<=r.pending_buf_size&&(Dt(r,255&t.adler),Dt(r,t.adler>>8&255),t.adler=0,r.status=At)):r.status=At),0!==r.pending){if(Tt(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&Ut(e)<=Ut(n)&&4!==e)return Ct(t,-5);if(r.status===St&&0!==t.avail_in)return Ct(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&r.status!==St){var s=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(Bt(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=gt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(jt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(jt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(jt(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var n,r,a,i,o=t.window;;){if(t.lookahead<=kt){if(Bt(t),t.lookahead<=kt&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=o[a=t.strstart-1])===o[++a]&&r===o[++a]&&r===o[++a]){i=t.strstart+kt;do{}while(r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&a<i);t.match_length=kt-(i-a),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=gt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=gt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(jt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(jt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(jt(t,!1),0===t.strm.avail_out)?1:2}(r,e):bt[r.level].func(r,e);if(3!==s&&4!==s||(r.status=St),1===s||3===s)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===s&&(1===e?ft(r):5!==e&&(_t(r,0,0,!1),3===e&&(Et(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Tt(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(Dt(r,255&t.adler),Dt(r,t.adler>>8&255),Dt(r,t.adler>>16&255),Dt(r,t.adler>>24&255),Dt(r,255&t.total_in),Dt(r,t.total_in>>8&255),Dt(r,t.total_in>>16&255),Dt(r,t.total_in>>24&255)):(It(r,t.adler>>>16),It(r,65535&t.adler)),Tt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)}bt=[new Wt(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Bt(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,jt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-zt&&(jt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(jt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(jt(t,!1),t.strm.avail_out),1)})),new Wt(4,4,8,4,Mt),new Wt(4,5,16,8,Mt),new Wt(4,6,32,32,Mt),new Wt(4,4,16,16,Nt),new Wt(8,16,32,32,Nt),new Wt(8,16,128,128,Nt),new Wt(8,32,128,256,Nt),new Wt(32,128,258,1024,Nt),new Wt(32,258,258,4096,Nt)];var qt=!0,Jt=!0;try{String.fromCharCode.apply(null,[0])}catch(t){qt=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Jt=!1}for(var Vt=new Uint8Array(256),Ht=0;Ht<256;Ht++)Vt[Ht]=Ht>=252?6:Ht>=248?5:Ht>=240?4:Ht>=224?3:Ht>=192?2:1;Vt[254]=Vt[254]=1;var Xt=function(t){var e,n,r,a,i,o=t.length,s=0;for(a=0;a<o;a++)55296==(64512&(n=t.charCodeAt(a)))&&a+1<o&&56320==(64512&(r=t.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(s),i=0,a=0;i<s;a++)55296==(64512&(n=t.charCodeAt(a)))&&a+1<o&&56320==(64512&(r=t.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?e[i++]=n:n<2048?(e[i++]=192|n>>>6,e[i++]=128|63&n):n<65536?(e[i++]=224|n>>>12,e[i++]=128|n>>>6&63,e[i++]=128|63&n):(e[i++]=240|n>>>18,e[i++]=128|n>>>12&63,e[i++]=128|n>>>6&63,e[i++]=128|63&n);return e},$t=function(t){return function(t,e){if(e<65534&&(t.subarray&&Jt||!t.subarray&&qt))return String.fromCharCode.apply(null,U(t,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}(t,t.length)};function Gt(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Yt=Object.prototype.toString;function Kt(t){if(!(this instanceof Kt))return new Kt(t);this.options=C({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Gt,this.strm.avail_out=0;var n,r,a=function(t,e,n,r,a,i){if(!t)return xt;var o=1;if(-1===e&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),a<1||a>9||8!==n||r<8||r>15||e<0||e>9||i<0||i>4)return Ct(t,xt);8===r&&(r=9);var s=new Lt;return t.state=s,s.strm=t,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=a+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<a+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=e,s.strategy=i,s.method=n,Ft(t)}(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==a)throw new Error(yt[a]);if(e.header&&(n=this.strm,r=e.header,n&&n.state&&(2!==n.state.wrap||(n.state.gzhead=r))),e.dictionary){var i;if(i="string"==typeof e.dictionary?Xt(e.dictionary):"[object ArrayBuffer]"===Yt.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(a=function(t,e){var n,r,a,i,o,s,l,d,h=e.length;if(!t||!t.state)return xt;if(2===(i=(n=t.state).wrap)||1===i&&42!==n.status||n.lookahead)return xt;for(1===i&&(t.adler=vt(t.adler,e,h,0)),n.wrap=0,h>=n.w_size&&(0===i&&(Et(n.head),n.strstart=0,n.block_start=0,n.insert=0),E(d=new Uint8Array(n.w_size),e,h-n.w_size,n.w_size,0),e=d,h=n.w_size),o=t.avail_in,s=t.next_in,l=t.input,t.avail_in=h,t.next_in=0,t.input=e,Bt(n);n.lookahead>=3;){r=n.strstart,a=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=2,Bt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=s,t.input=l,t.avail_in=o,n.wrap=i,0}(this.strm,i)))throw new Error(yt[a]);this._dict_set=!0}}function Qt(t,e){return(e=e||{}).gzip=!0,function(t,e){var n=new Kt(e);if(n.push(t,!0),n.err)throw n.msg||yt[n.err];return n.result}(t,e)}Kt.prototype.push=function(t,e){var n,r,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;r=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=Xt(t):"[object ArrayBuffer]"===Yt.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),1!==(n=Rt(a,r))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData($t(U(a.output,a.next_out))):this.onData(U(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==n);return 4===r?(n=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&e!==Ot&&e!==At&&e!==St?Ct(t,xt):(t.state=null,e===At?Ct(t,-3):0):xt}(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==r||(this.onEnd(0),a.avail_out=0,!0)},Kt.prototype.onData=function(t){this.chunks.push(t)},Kt.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=function(t){var e,n,r,a,i,o;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(o=new Uint8Array(r),a=0,e=0,n=t.length;e<n;e++)i=t[e],o.set(i,a),a+=i.length;return o}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Zt=navigator.userAgent;function te(t,e){var n,r=JSON.stringify(t);"1"===e?n=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?y(k(t)):k(t)}(Qt(r)):n=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?y(A(t)):A(t)}(r);return encodeURIComponent(n)}function ee(t,e,n){return e-t>864e5*n}var ne=C;function re(t){return"[object Array]"===Object.prototype.toString.call(t)}function ae(t){return"[object Object]"===Object.prototype.toString.call(t)}function ie(t,e,n){e=e||"";var r=new Date(t),a=r.getFullYear(),i=r.getMonth()+1,o=r.getDate();i<10&&(i="0"+i),o<10&&(o="0"+o);var s=r.getHours(),l=r.getMinutes(),d=r.getSeconds();if(s<10&&(s="0"+s),l<10&&(l="0"+l),d<10&&(d="0"+d),"date"===n)var h=a+e+i+e+o;else h=a+e+i+e+o+" "+s+":"+l+":"+d;return h}function oe(){return _()}function se(){if(window.screen){var t=window.screen.width?window.screen.width:"",e=window.screen.height?window.screen.height:"";return{width:String(t),height:String(e)}}return{width:"",height:""}}function le(e,n){var r;if(null!=n&&("object"===t(n)&&(n=JSON.stringify(n)),localStorage.setItem(e,n)),void 0===n){r=localStorage.getItem(e);try{r=JSON.parse(r)}catch(t){r=r}return r}null===n&&localStorage.removeItem(e)}var de,he,ue=(new Date).getTime(),ce="",_e="1",fe=!1,pe=!1,ge=0,ve=!1,we={upload:1,pullminute:5,batchinterval:5,batchsize:30,dataexpire:7,systemtime:ie(new Date,"-"),noNeedEvents:[]},me={},be=1,ye=!1,xe=le("cbas_device_id")||"",ke="",ze="",Oe="",Ae={lib:"js",lib_version:a,is_phone_login:!1,is_account_login:!1,is_margin_login:!1},Se={},Ce="/cbasums/v2/ums/event.do",Ue="/cbasums/v2/ums/profile.do",Ee="/cbasums/v2/ums/getOnlineConfiguration",Te="/cbasums/v2/ums/test",je=!1;function De(){}function Ie(t){if(!ae(t))throw new Error("Parameters must be an object");if(!t.type)throw new Error("type is required");ae(t.properties)||(t.properties={});var e={distinct_id:xe,time:Ve(),type:t.type,phone:ke,account:ze,properties:t.properties};("client_bind"===t.type&&(e.properties["#clientInfo"]=t.clientInfo),fe)?nn({type:2,content:e},"doWebUmsDelegate"):We(e,"cbas_profiles")}function Pe(t){var e=le("cbas_account");void 0!==t?(e?(ke=t.hasOwnProperty("phone")?t.phone:e.phone||"",ze=t.hasOwnProperty("account")?t.account:e.account||"",Oe=t.hasOwnProperty("margin_account")?t.margin_account:e.margin_account||""):(ke=t.phone||"",ze=t.account||"",Oe=t.margin_account||""),fe||(!t.phone||e&&""!==e.phone&&e.phone===t.phone||Ie({type:"phone_bind"}),!t.account||e&&""!==e.account&&e.account===t.account||Ie({type:"acct_bind"})),le("cbas_account",{phone:ke,account:ze,margin_account:Oe})):e&&(ke=e.phone||"",ze=e.account||"",Oe=e.margin_account||"")}function Be(t,e){t.hasOwnProperty(e)?Ae[e]=t[e]:Ae[e]=Ae[e]||!1}De.prototype.version=a,De.prototype.init=function(t){if(!ae(t))throw new Error("Parameters must be an object");if(fe=t.nativeMode||!1,!t.appkey)throw new Error("appkey is required");ce=t.appkey||"unkown",pe=t.manual_set_device_id||!1,_e=t.gzip||"1",je=t.debug||!1,rn("sdk init",t),Ee=t.onlineConfigUrl||Ee,Ce=t.eventUrl||Ce,Ue=t.profileUrl||Ue,Te=t.testUrl||Te,fe||(Ge(),ye=""===xe),t.hasOwnProperty("device_id")&&t.device_id&&le("cbas_device_id",xe=t.device_id);var e,n,r,a=le("cbas_first_day"),i=ie(new Date,"-","date");a?Ae.is_first_day=a===i:(le("cbas_first_day",i),Ae.is_first_day=!0),Ae.app_type=fe?"app":"web",Ae.app_version=t.app_version||"1.0.0",Ae.launch_scene=t.launch_scene||"",Ae.manufacturer=t.manufacturer||"",Ae.devicename=t.devicename||(r="",-1!=Zt.indexOf("Opera Mini")?r="Opera Mini":-1!=Zt.indexOf("Opera")?r="Opera":-1!=Zt.indexOf("MSIE")?r="Internet Explorer":-1!=Zt.indexOf("IEMobile")?r="IE Mobile":-1!=Zt.indexOf("Chrome")?r="Chrome":-1!=Zt.indexOf("Safari")?r="Safari":-1!=Zt.indexOf("Firefox")?r="Firefox":-1!=Zt.indexOf("Trident/")?r="Internet Explorer":-1!=Zt.indexOf("MicroMessenger")?r="MicroMessenger":(e=Zt.lastIndexOf(" ")+1)<(n=Zt.lastIndexOf("/"))&&(r=Zt.substring(e,n)).toLowerCase()==r.toUpperCase()&&(r=navigator.appName),r.toLowerCase()),Ae.os=fe?/android/gi.test(Zt)?"android":"ios":"web",Ae.os_version=t.os_version||function(){var t=navigator.userAgent,e="";if(t.indexOf("Mac OS X")>-1)e=(t.match(/OS [\d._]*/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".");else if(t.indexOf("Android")>-1||t.indexOf("Linux")>-1)e=t.substr(t.indexOf("Android")+8,t.indexOf(";",t.indexOf("Android"))-t.indexOf("Android")-8);else{var n=Zt.toLowerCase();e=n.indexOf("windows nt 5.0")>-1?"Windows 2000":n.indexOf("windows nt 5.1")>-1||n.indexOf("windows nt 5.2")>-1?"Windows XP":n.indexOf("windows nt 6.0")>-1?"Windows Vista":n.indexOf("windows nt 6.1")>-1||n.indexOf("windows 7")>-1?"Windows 7":n.indexOf("windows nt 6.2")>-1||n.indexOf("windows 8")>-1?"Windows 8":n.indexOf("windows nt 6.3")>-1?"Windows 8.1":n.indexOf("windows nt 6.2")>-1||n.indexOf("windows nt 10.0")>-1?"Windows 10":""}return e}(),Ae.imei=t.imei||"",Ae.imsi=t.imsi||"",Ae.wifi_mac=t.wifi_mac||"",Ae.mccmnc=t.mccmnc||"",Ae.network=t.network||"",Ae.screen_width=t.screen_width||se().width,Ae.screen_height=t.screen_height||se().height,t.hasOwnProperty("ext_properties")&&ae(t.ext_properties)&&(Ae=ne(Ae,t.ext_properties)),Pe(),xe||pe||le("cbas_device_id",xe=oe()),de=setInterval((function(){tn()}),500),!fe&&ye&&xe&&Ie({type:"device_add"})},window._umsNativeLifeCycle=function(t){if(fe)if("1"===t)nn({type:1,currPage:Ae.page_unicode},"doWebUmsDelegate"),en(0,1e3),de=setInterval((function(){tn()}),500);else if("3"===t){var e=Re();if(e)nn({type:1,content:e},"doWebUmsDelegate");clearInterval(de),qe("")}},De.prototype.setDeviceId=function(t){fe||pe&&(t?xe!==t&&(le("cbas_device_id",xe=t),Ie({type:"device_add"})):xe||(le("cbas_device_id",xe=oe()),Ie({type:"device_add"})))},De.prototype.setAccountInfo=function(t){if(!ae(t))throw new Error("Parameters must be an object");if(!t.hasOwnProperty("phone")&&!t.hasOwnProperty("account")&&!t.hasOwnProperty("margin_account"))throw new Error("At least one of phone/account/margin_account is needed");Pe(t),Be(t,"is_phone_login"),Be(t,"is_account_login"),Be(t,"is_margin_login")},De.prototype.client_bind=function(t){if(!ae(t))throw new Error("Parameters must be an object");if(!t.hasOwnProperty("clientInfo"))throw new Error("clientInfo is needed");Be(t,"is_phone_login"),Be(t,"is_account_login"),Ie({type:"client_bind",clientInfo:t.clientInfo})},De.prototype.reg_pagename=function(t){rn("sdk reg_pagename",t);var e="",n="";if(!t)throw new Error("Parameters is required");if("string"==typeof t)e=t;else if(ae(t)){if(!t.page_unicode)throw new Error("page_unicode is required");e=t.page_unicode,n=t.source_page_unicode||"",t.properties&&"{}"!==JSON.stringify(t.properties)&&(Se=ne({},t.properties))}fe&&function(t){var e;if(Ae.page_unicode){var n=Re();qe(""),e={type:1,content:n,currPage:t}}else e={type:1,currPage:t};nn(e,"doWebUmsDelegate")}(e),function(){var t=Re();if(t){if(!fe){var e=t.appkey||ce;delete t.appkey,We(t,"cbas_events",e)}qe("")}}(),Ae.source_page_unicode=n||Ae.page_unicode||"",Ae.page_unicode=e,en(0,1e3)},De.prototype.add_event=function(t){if(rn("sdk add_event",t),!ae(t))throw new Error("Parameters must be an object");if(!t.event)throw new Error("event is required");if(!function(t,e){var n=!1;if(re(t))for(var r=0;r<t.length;r++)if(t[r]===e){n=!0;break}return n}(me.noNeedEvents,t.event)){var e={distinct_id:xe,time:Ve(),event:t.event,phone:ke,account:ze};if(e.properties=ne({},Ae,t.properties),fe)nn({type:1,content:e},"doWebUmsDelegate");else We(e,"cbas_events")}},De.prototype.add_profile=Ie,De.prototype.flush=function(){var t=Re();if(t&&""!==t.distinct_id){var e={appkey:ce,gzip:_e};e.content=te([t],_e),navigator.sendBeacon?function(t,e){var n=new Blob([o(e)],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(t,n)}(Ce,e):i({url:Ce,data:e})}};var Me=0;function Ne(t){Me>=3?Ze():i({type:"get",url:Te,success:function(){Me=0,t&&t(),Qe()},error:function(e){Me<3&&(Me++,setTimeout((function(){Ne(t)}),6e4)),rn("心跳测试接口报错",e)}})}function We(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ce,a=le(n);if(a){var i=a[r],o=re(i),s=re(t);o?(s?i=i.concat(t):i.push(t),a[r]=i,le(n,a)):(a[r]=s?t:[t],le(n,a))}else{var l=e({},r,[t]);le(n,l)}2===be&&("cbas_events"===n?He():"cbas_profiles"===n&&Xe())}function Le(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce,n=le(t);if(n){var r=n[e];if(re(r)){var a=me.batchsize,i=r.slice(0,a);if(0===i.length)return null;var o=Je(i),s=o.some((function(t){return""===t.distinct_id}));return s?null:o}return null}return null}function Fe(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ce,r=le(t);if(r){var a=r[n];re(a)&&(a.splice(0,e),r[n]=a,le(t,r))}}function Re(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,e=le("cbas_duration");if(e){var n=e[t];return n||null}return null}function qe(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce,r=le("cbas_duration");r?r[n]=t:r=e({},n,t),le("cbas_duration",r)}function Je(t){return t&&0!==t.length?t.map((function(t){return!t.distinct_id&&xe&&(t.distinct_id=xe),t})):t}function Ve(){var t=(new Date).getTime();return ve&&(t+=ge),t}function He(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce;if(0!==be){var e={appkey:t,gzip:_e},n=Le("cbas_events",t);if(n){var r=n.length;e.content=te(n,_e),i({url:Ce,data:e,success:function(e){var a=JSON.parse(e);rn("埋点事件上传",n),200!==a.code?Me>=3&&Ze():(Fe("cbas_events",r,t),Me=0)},error:function(t){Me++,rn("埋点事件上传接口报错",t),Ze(),Ne(He)}})}}}function Xe(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce;if(0!==be){var e={appkey:t,gzip:_e},n=Le("cbas_profiles",t);if(n){var r=n.length;e.content=te(n,_e),i({url:Ue,data:e,success:function(e){var a=JSON.parse(e);rn("埋点用户属性上传",n),200!==a.code?Me>=3&&Ze():(Fe("cbas_profiles",r,t),Me=0)},error:function(t){Me++,rn("用户属性上传接口报错",t),Ze(),Ne(Xe)}})}}}function $e(){rn(ie(new Date,"-"),"report"),He(),Xe()}function Ge(){var t=(new Date).getTime();i({url:Ee,data:{appkey:ce},success:function(e){var n,r,a=JSON.parse(e);if(1===a.flag){rn("埋点在线配置请求成功",a),me.upload=S(n=a,r="upload")&&""!==n[r]&&null!==n[r]?a.upload:we.upload,me.pullminute=a.pullminute||we.pullminute,me.batchinterval=void 0!==a.batchinterval?a.batchinterval:we.batchinterval,me.batchsize=a.batchsize||we.batchsize,me.dataexpire=a.dataexpire||we.dataexpire,me.systemtime=a.systemtime||we.systemtime,me.noNeedEvents=a.noNeedEvents||we.noNeedEvents;var i=new Date(me.systemtime.replace(/\-/g,"/")).getTime();ve=!0,ge=i-t,le("cbas_setting",me),setTimeout((function(){Ge()}),6e4*me.pullminute)}else rn("埋点在线配置请求失败",a),Ye();Ke()},error:function(t){rn("埋点在线配置接口报错",t),Ye(),Ke()}})}function Ye(){ve=!1;var t=le("cbas_setting");t?(me=t,setTimeout((function(){Ge()}),6e4*me.pullminute)):(me=ne({},we),setTimeout((function(){Ge()}),6e4))}function Ke(){!function(t){var e=(new Date).getTime(),n=le("cbas_events");if(n){var r=n[ce];r&&0!==r.length&&(r=r.filter((function(n){return!ee(n.time,e,t)})),n[ce]=r,le("cbas_events",n))}var a=le("cbas_profiles");if(a){var i=a[ce];i&&0!==i.length&&(i=i.filter((function(n){return!ee(n.time,e,t)})),a[ce]=i,le("cbas_profiles",a))}}(me.dataexpire),Ze(),1===me.upload?0===me.batchinterval?(be=2,$e()):(be=1,Qe()):be=0}function Qe(){he=setInterval((function(){$e()}),1e3*me.batchinterval)}function Ze(){he&&clearInterval(he)}function tn(){var t=(new Date).getTime();t-ue>5e3&&(en(ue,t),ue=t)}function en(t,e){var n=e-t,r=Re(),a={appkey:ce,distinct_id:xe,time:Ve(),event:"app_view_screen",phone:ke,account:ze};a.properties=ne({},Ae,Se),r?(a.time=r.time,a.properties.event_duration=r.properties.event_duration+n):a.properties.event_duration=n,qe(a)}function nn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"doWebUmsDelegate",n=arguments.length>2?arguments[2]:void 0;try{window.connectWebViewJavascriptBridge((function(r){r.callHandler(e,t,(function(t){n&&n(t)}))})),rn("jsBridge上报:",t)}catch(t){rn("jsBridge报错:",t)}}function rn(){var t;je&&(t=console).log.apply(t,arguments)}return new De}));
